<!DOCTYPE html>
<html lang="jv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasinaon Basa Jawa: Teks Narasi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f0fdf4;
            scroll-behavior: smooth;
        }
        .card { transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); }
        .story-box { background-color: #fffbeb; border-left: 10px solid #f59e0b; }
        .nature-box { background-color: #e0f2fe; border-left: 10px solid #0284c7; }
        .unsur-box { background-color: #fef2f2; border: 2px dashed #ef4444; }
        .image-placeholder { 
            width: 100%; 
            height: 250px; 
            background: #e5e7eb; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-radius: 1.5rem;
            margin-bottom: 1rem;
            overflow: hidden;
        }
        .game-area { background-color: #faf5ff; border: 4px solid #a855f7; }
        .mini-game { background-color: #fff1f2; border: 2px solid #fb7185; }
        .sentence-btn.selected { background-color: #f3e8ff; border-color: #a855f7; color: #7e22ce; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <!-- Navigation -->
        <nav class="flex justify-center gap-4 mb-6">
            <a href="#materi" class="bg-green-500 text-white px-6 py-2 rounded-full font-bold shadow-sm hover:bg-green-600">üìñ Materi</a>
            <a href="#game" class="bg-purple-500 text-white px-6 py-2 rounded-full font-bold shadow-sm hover:bg-purple-600">üéÆ Main Game</a>
        </nav>

        <div id="materi">
            <!-- Header -->
            <header class="text-center mb-10 bg-green-600 text-white p-8 rounded-3xl shadow-lg">
                <h1 class="text-3xl md:text-5xl font-bold mb-2">Sugeng Rawuh, Bocah-Bocah Pintar! üåü</h1>
                <p class="text-xl text-green-100">Dina iki kita bakal sinau babagan: <span class="underline">Teks Narasi</span></p>
            </header>

            <!-- Pangerten Section -->
            <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
                <div class="bg-white p-6 rounded-2xl shadow-md border-b-4 border-green-500 card">
                    <h2 class="text-2xl font-bold text-green-700 mb-4">Apa iku Teks Narasi? ü§î</h2>
                    <p class="text-gray-700 leading-relaxed text-lg font-medium">
                        Teks Narasi yaiku wacan sing isine nyritakake sawijining kedadean utawa prastawa kanthi <span class="text-green-600 underline">urut wektune</span>.
                    </p>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-md border-b-4 border-blue-500 card">
                    <h2 class="text-2xl font-bold text-blue-700 mb-4">Titikane ‚ú®</h2>
                    <ul class="list-disc ml-5 text-gray-700 text-lg space-y-1">
                        <li>Isine crita bab prastawa.</li>
                        <li>Critane urut wektune.</li>
                        <li>Ana paraga, latar, lan alure.</li>
                    </ul>
                </div>
            </section>

            <!-- Unsur-unsur Section (NEWLY ADDED BACK) -->
            <section class="unsur-box p-8 rounded-3xl mb-10 shadow-sm">
                <h2 class="text-2xl md:text-3xl font-bold text-red-600 mb-6 text-center">üß© Unsur-unsur Teks Narasi</h2>
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
                    <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-red-500">
                        <h4 class="font-bold text-red-700">Tema</h4>
                        <p class="text-xs text-gray-500">Gagasan crita</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-orange-500">
                        <h4 class="font-bold text-orange-700">Alur</h4>
                        <p class="text-xs text-gray-500">Urutan crita</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-yellow-500">
                        <h4 class="font-bold text-yellow-700">Paraga</h4>
                        <p class="text-xs text-gray-500">Tokoh ing crita</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-green-500">
                        <h4 class="font-bold text-green-700">Latar</h4>
                        <p class="text-xs text-gray-500">Panggon & Wektu</p>
                    </div>
                </div>
            </section>

            <!-- Tuladha Narasi Padinan -->
            <section class="bg-white p-6 md:p-8 rounded-3xl shadow-md mb-8 story-box">
                <h2 class="text-2xl font-bold text-amber-700 mb-4 flex items-center gap-2">
                    üè† Tuladha Padinan: Budhal Sekolah
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                    <div id="img-container-school" class="image-placeholder shadow-inner">
                        <span class="text-gray-400">Loading Gambar...</span>
                    </div>
                    <div class="text-lg text-gray-800 leading-loose space-y-4">
                        <p>
                            Saben esuk Bima tangi jam setengah enem. Sawise tangi, Bima banjur nata peturon lan adus. Bima nganggo seragam sekolah kanthi rapi.
                        </p>
                        <p>
                            Sadurunge budhal, Bima sarapan bareng Bapak lan Ibu. Rampung sarapan, Bima pamit lan salim marang wong tuwane.
                        </p>
                    </div>
                </div>

                <!-- MINI GAME -->
                <div class="mini-game p-6 mt-8 rounded-2xl shadow-inner">
                    <h3 class="text-xl font-bold text-rose-700 mb-4">üéØ Game: Tebak Unsur Crita</h3>
                    <div id="mini-quiz" class="space-y-6">
                        <div>
                            <p class="font-bold text-gray-700 mb-2">1. Sapa paraga utama ing crita "Budhal Sekolah"?</p>
                            <div class="grid grid-cols-3 gap-2">
                                <button onclick="checkMini(1, 'Rini', this)" class="bg-white p-2 rounded-lg border hover:bg-rose-50 text-sm">Rini</button>
                                <button onclick="checkMini(1, 'Bima', this)" class="bg-white p-2 rounded-lg border hover:bg-rose-50 text-sm">Bima</button>
                                <button onclick="checkMini(1, 'Ibu', this)" class="bg-white p-2 rounded-lg border hover:bg-rose-50 text-sm">Ibu</button>
                            </div>
                        </div>
                    </div>
                    <div id="mini-feedback" class="mt-4 hidden font-bold text-center p-3 rounded-lg"></div>
                </div>
            </section>

            <!-- Tuladha Narasi Alam -->
            <section class="bg-white p-6 md:p-8 rounded-3xl shadow-md mb-10 nature-box">
                <h2 class="text-2xl font-bold text-blue-700 mb-4 flex items-center gap-2">
                    üåä Tuladha Alam: Banjir
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                    <div class="text-lg text-gray-800 leading-loose order-2 md:order-1">
                        <p>
                            Wis telung dina udan deres ora leren-leren. Kaline melu kebak amarga akeh sampah sing mampet. Ing dina Selasa bengi, banyu kali wiwit mlebu menyang omahe warga.
                        </p>
                    </div>
                    <div id="img-container-flood" class="image-placeholder shadow-inner order-1 md:order-2">
                        <span class="text-gray-400">Loading Gambar...</span>
                    </div>
                </div>
            </section>
        </div>

        <!-- GAME SECTION -->
        <div id="game" class="game-area p-8 rounded-3xl shadow-xl mb-10">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl md:text-3xl font-bold text-purple-800">üéÆ Game: Nata Crita</h2>
                <div class="bg-purple-100 px-4 py-2 rounded-full font-bold text-purple-700">Soal: <span id="current-level">1</span>/4</div>
            </div>
            <div id="game-challenge" class="space-y-4">
                <h3 id="story-title" class="text-center font-bold text-xl text-purple-900">...</h3>
                <div id="scrambled-sentences" class="grid grid-cols-1 gap-3"></div>
                <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mt-8">
                    <button id="check-btn" onclick="checkGameOrder()" class="bg-purple-600 text-white px-8 py-3 rounded-xl font-bold text-xl shadow-lg w-full sm:w-auto hover:bg-purple-700 transition">Priksa ‚úÖ</button>
                    <button id="next-level-btn" onclick="nextLevel()" class="hidden bg-green-600 text-white px-8 py-3 rounded-xl font-bold text-xl shadow-lg w-full sm:w-auto hover:bg-green-700 transition">Lanjut ‚û°Ô∏è</button>
                    <div class="text-2xl font-bold text-purple-800">Skor: <span id="game-score">0</span></div>
                </div>
                <div id="game-feedback" class="mt-4 p-4 rounded-xl hidden text-center font-bold text-xl"></div>
                <div class="text-center mt-4">
                    <button onclick="resetGame()" class="text-purple-600 underline font-bold">Baleni Game üîÑ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const apiKey = ""; 

        async function generateImage(prompt, containerId) {
            const container = document.getElementById(containerId);
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        instances: [{ prompt: prompt }],
                        parameters: { sampleCount: 1 }
                    })
                });
                const result = await response.json();
                if (result.predictions && result.predictions[0]) {
                    const imageUrl = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
                    container.innerHTML = `<img src="${imageUrl}" class="w-full h-full object-cover" alt="Ilustrasi">`;
                }
            } catch (error) {
                container.innerHTML = `<div class="p-4 text-center text-gray-400 text-xs">Gambar ora kasedhiya.</div>`;
            }
        }

        function checkMini(q, ans, el) {
            const fb = document.getElementById('mini-feedback');
            fb.classList.remove('hidden', 'bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');
            if (ans === 'Bima') {
                fb.innerText = "Bener! Pinter sanget! üåü";
                fb.classList.add('bg-green-100', 'text-green-700', 'block');
            } else {
                fb.innerText = "Coba diwaos malih nggih... üí™";
                fb.classList.add('bg-red-100', 'text-red-700', 'block');
            }
            setTimeout(() => fb.classList.add('hidden'), 2000);
        }

        const allLevels = [
            { title: "Rini Masak", sentences: [{id:1, text:"Dina Minggu esuk, Rini tangi gasik.", order:1}, {id:2, text:"Rini mbantu Ibu ngumbah sayuran.", order:2}, {id:3, text:"Sawise masak, Rini nata piring.", order:3}, {id:4, text:"Wong sakulawarga banjur sarapan.", order:4}] },
            { title: "Bima Bal-balan", sentences: [{id:5, text:"Sore-sore, Bima menyang lapangan.", order:1}, {id:6, text:"Kanca-kancane wis nunggu ing kana.", order:2}, {id:7, text:"Bocah-bocah banjur bal-balan bareng.", order:3}, {id:8, text:"Bareng wis maghrib, Bima mulih.", order:4}] },
            { title: "Resik Kelas", sentences: [{id:9, text:"Bel sekolah muni, bocah mlebu kelas.", order:1}, {id:10, text:"Bu Guru dhawuh resik-resik kelas.", order:2}, {id:11, text:"Bima nyapu lan Rini ngelap kaca.", order:3}, {id:12, text:"Kelas dadi resik lan rapi banget.", order:4}] },
            { title: "Ing Kebun Binatang", sentences: [{id:13, text:"Pak Guru ngajak bocah rekreasi.", order:1}, {id:14, text:"Bocah padha ndelok gajah lan kethek.", order:2}, {id:15, text:"Sadurunge mulih, padha mangan bekel.", order:3}, {id:16, text:"Jam telu sore, bis budhal bali.", order:4}] }
        ];

        let currentLevelIndex = 0;
        let userOrder = [];
        let score = 0;

        function loadLevel() {
            const levelData = allLevels[currentLevelIndex];
            document.getElementById('current-level').innerText = currentLevelIndex + 1;
            document.getElementById('story-title').innerText = "Crita: " + levelData.title;
            const container = document.getElementById('scrambled-sentences');
            container.innerHTML = '';
            userOrder = [];
            [...levelData.sentences].sort(() => Math.random() - 0.5).forEach(item => {
                const btn = document.createElement('button');
                btn.className = "sentence-btn w-full text-left p-4 bg-white border-2 border-purple-200 rounded-xl font-medium relative hover:border-purple-400";
                btn.innerText = item.text;
                btn.onclick = () => {
                    if (userOrder.find(i => i.id === item.id)) return;
                    userOrder.push(item);
                    btn.classList.add('selected');
                    const badge = document.createElement('span');
                    badge.className = "absolute right-4 top-1/2 -translate-y-1/2 bg-purple-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm badge";
                    badge.innerText = userOrder.length;
                    btn.appendChild(badge);
                };
                container.appendChild(btn);
            });
            document.getElementById('game-feedback').classList.add('hidden');
            document.getElementById('next-level-btn').classList.add('hidden');
            document.getElementById('check-btn').classList.remove('hidden');
        }

        function checkGameOrder() {
            if (userOrder.length < 4) return;
            const isCorrect = userOrder.every((item, index) => item.order === (index + 1));
            const feedback = document.getElementById('game-feedback');
            feedback.classList.remove('hidden');
            if (isCorrect) {
                score += 100;
                document.getElementById('game-score').innerText = score;
                feedback.innerText = "HEBAT! Urutane wis bener! üéâ";
                feedback.className = "mt-4 p-4 rounded-xl block text-center font-bold text-xl bg-green-100 text-green-700";
                document.getElementById('check-btn').classList.add('hidden');
                if (currentLevelIndex < 3) {
                    document.getElementById('next-level-btn').classList.remove('hidden');
                } else {
                    feedback.innerText = "LUAR BIASA! Kabeh soal wis rampung! üèÜ";
                }
            } else {
                feedback.innerText = "Ditaliti maneh nggih... üí™";
                feedback.className = "mt-4 p-4 rounded-xl block text-center font-bold text-xl bg-red-100 text-red-700";
                setTimeout(() => { loadLevel(); feedback.classList.add('hidden'); }, 1500);
            }
        }

        function nextLevel() { currentLevelIndex++; loadLevel(); }
        function resetGame() { currentLevelIndex = 0; score = 0; document.getElementById('game-score').innerText = 0; loadLevel(); }

        window.onload = function() {
            loadLevel();
            generateImage("A cute 2D illustration of a Javanese boy named Bima waking up in a bright room with sunrise outside window, storybook style", "img-container-school");
            generateImage("A simple 2D illustration of a village street partially flooded by water, people helping each other, educational cartoon style", "img-container-flood");
        };
    </script>
</body>
</html>