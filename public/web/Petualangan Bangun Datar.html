<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petualangan Bangun Datar - 15 Misi Hebat</title>
    <style>
        :root {
            --primary: #4facfe;
            --secondary: #43e97b;
            --accent: #f093fb;
            --white: #ffffff;
        }

        body {
            font-family: 'Arial Rounded MT Bold', 'Helvetica', sans-serif;
            background: #f0f4f8;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #app-container {
            width: 95%;
            max-width: 500px;
            background: var(--white);
            padding: 30px;
            border-radius: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
        }

        /* Robot Animasi */
        .robot-box { height: 120px; margin-bottom: 10px; }
        #robot-icon { 
            font-size: 80px; 
            display: inline-block; 
            transition: all 0.3s;
        }

        /* Animasi Bergerak-gerak */
        .dance { animation: dance 0.5s infinite; }
        .float { animation: float 3s ease-in-out infinite; }
        
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes dance { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-20px) scale(1.1); } }

        .bubble { 
            background: #fdfdfd; padding: 15px; border-radius: 20px; 
            margin: 10px 0; font-weight: bold; border: 3px solid #eee;
            min-height: 50px; display: flex; align-items: center; justify-content: center;
        }

        /* Tombol 3D */
        .btn-3d {
            display: block; width: 100%; margin: 15px 0; padding: 18px;
            font-size: 1.1rem; font-weight: bold; color: white; border: none;
            border-radius: 20px; cursor: pointer; transition: 0.1s;
            text-transform: uppercase;
        }
        .btn-blue { background: #4facfe; box-shadow: 0 8px 0 #3a8cc7; }
        .btn-green { background: #43e97b; box-shadow: 0 8px 0 #32b35d; }
        .btn-purple { background: #f093fb; box-shadow: 0 8px 0 #c276cc; }
        .btn-3d:active { transform: translateY(4px); box-shadow: 0 4px 0 #333; }

        /* Bangun Datar Visual */
        .big-shape { width: 160px; height: 160px; margin: 20px auto; display: flex; align-items: center; justify-content: center; }
        .circle { width: 140px; height: 140px; background: #ff758c; border-radius: 50%; box-shadow: inset -10px -10px 0 rgba(0,0,0,0.1); }
        .square { width: 140px; height: 140px; background: #764ba2; box-shadow: inset -10px -10px 0 rgba(0,0,0,0.1); }
        .triangle { width: 0; height: 0; border-left: 80px solid transparent; border-right: 80px solid transparent; border-bottom: 140px solid #f6d365; }
        .rect { width: 200px; height: 120px; background: #2af598; box-shadow: inset -10px -10px 0 rgba(0,0,0,0.1); }

        .hidden { display: none; }
        .nav-controls { display: flex; justify-content: space-between; margin-top: 20px; gap: 10px; }
        .small-btn { flex: 1; padding: 12px; border-radius: 15px; border: 1px solid #ddd; background: #fff; cursor: pointer; font-weight: bold; }

        #cert { border: 10px double #ffd700; padding: 30px; border-radius: 30px; background: #fffdf5; }
    </style>
</head>
<body>

<div id="app-container">
    <div class="robot-box">
        <div id="robot-icon" class="float">ü§ñ</div>
    </div>
    <div class="bubble" id="robot-msg">Halo! Aku Robot Pintar. Ayo kita belajar bersama!</div>

    <div id="screen-intro">
        <input type="text" id="student-name" style="padding: 15px; border-radius: 15px; border: 2px solid #ddd; width: 80%; font-size: 1rem;" placeholder="Masukkan namamu...">
        <button class="btn-3d btn-blue" onclick="startApp()">Ayo Mulai! üöÄ</button>
    </div>

    <div id="screen-main" class="hidden">
        <button class="btn-3d btn-blue" onclick="nav('screen-nama', 'Mari kita lihat bentuk-bentuk yang cantik ini!')">üìè Daftar Bangun</button>
        <button class="btn-3d btn-green" onclick="nav('screen-ciri', 'Pahami ciri-cirinya satu per satu ya!')">üîç Belajar Ciri-Ciri</button>
        <button class="btn-3d btn-purple" onclick="nav('screen-game', 'Siapkan dirimu untuk 15 tantangan seru!')">üéÆ Main Kuis (15 Soal)</button>
    </div>

    <div id="screen-nama" class="hidden">
        <div class="big-shape" id="name-visual"></div>
        <h2 id="name-title"></h2>
        <div class="nav-controls">
            <button class="small-btn" onclick="changeName(-1)">‚¨ÖÔ∏è</button>
            <button class="small-btn" onclick="nav('screen-main', 'Pilih menu lainnya ya!')">Menu</button>
            <button class="small-btn" onclick="changeName(1)">‚û°Ô∏è</button>
        </div>
    </div>

    <div id="screen-ciri" class="hidden">
        <div class="big-shape" id="ciri-visual"></div>
        <h3 id="ciri-title"></h3>
        <p id="ciri-text" style="background: #f0f8ff; padding: 15px; border-radius: 20px; font-size: 0.9rem; line-height: 1.4;"></p>
        <div class="nav-controls">
            <button class="small-btn" onclick="changeCiri(-1)">‚¨ÖÔ∏è</button>
            <button class="small-btn" onclick="nav('screen-main')">Menu</button>
            <button class="small-btn" onclick="changeCiri(1)">‚û°Ô∏è</button>
        </div>
    </div>

    <div id="screen-game" class="hidden">
        <div style="font-size: 0.9rem; color: #666;">Progress: <b id="progress-text">1/15</b> | Skor: <b id="score-text">0</b></div>
        <div class="bubble" id="q-text" style="background: #fff; border-color: var(--accent);"></div>
        <div id="q-opts" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 10px;"></div>
        <button id="next-btn" class="hidden btn-3d btn-green" onclick="nextQuestion()">Tantangan Berikutnya ‚û°Ô∏è</button>
    </div>

    <div id="screen-cert" class="hidden">
        <div id="cert">
            <h2 style="color: #daa520; margin: 0;">üèÜ SERTIFIKAT AHLI üèÜ</h2>
            <p>Diberikan kepada Juara Matematika:</p>
            <h1 id="cert-name" style="border-bottom: 2px solid #333; display: inline-block; padding: 0 20px;">Nama</h1>
            <p>Telah menyelesaikan 15 Misi Bangun Datar!</p>
            <div style="font-size: 40px;">ü•áüåüü•á</div>
        </div>
        <button class="btn-3d btn-blue" onclick="location.reload()">Main Lagi üîÑ</button>
    </div>
</div>

<script>
    let studentName = "";
    let score = 0;
    let questionCount = 0;
    let currentIdx = 0;
    const totalQuestions = 15;

    const shapes = [
        {name: "Lingkaran", class: "circle", ciri: "Aku hanya punya 1 sisi melengkung. Aku tidak punya sudut, jadi aku bisa menggelinding dengan mudah!"},
        {name: "Segitiga", class: "triangle", ciri: "Aku punya 3 sisi lurus dan 3 titik sudut yang keren. Jumlah sudutku kalau digabung adalah 180 derajat!"},
        {name: "Persegi", class: "square", ciri: "Aku punya 4 sisi yang sama panjang. Keempat sudutku adalah sudut siku-siku yang sempurna!"},
        {name: "Persegi Panjang", class: "rect", ciri: "Aku punya 4 sisi. Sisi yang berhadapan sama panjang, dan semua sudutku adalah sudut siku-siku!"}
    ];

    const motivasi = [
        "Wah, kamu hebat sekali!", "Terus semangat ya, kamu pasti bisa!", 
        "Luar biasa! Kamu pintar matematika!", "Jangan menyerah, sedikit lagi selesai!",
        "Kamu benar-benar juara!", "Ayo, tantangan berikutnya menantimu!"
    ];

    function speak(txt) {
        document.getElementById('robot-msg').innerText = txt;
        const s = new SpeechSynthesisUtterance(txt);
        s.lang = 'id-ID';
        window.speechSynthesis.speak(s);
    }

    function startApp() {
        const n = document.getElementById('student-name').value;
        if(!n) return speak("Namamu siapa? Beritahu aku dulu ya!");
        studentName = n;
        document.getElementById('cert-name').innerText = n;
        nav('screen-main', `Halo ${n}! Senang sekali bisa belajar bersamamu. Pilih menu di bawah!`);
    }

    function nav(id, msg) {
        document.querySelectorAll('#app-container > div:not(.robot-box):not(.bubble)').forEach(d => d.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        if(msg) speak(msg);
        if(id === 'screen-nama') changeName(0);
        if(id === 'screen-ciri') changeCiri(0);
        if(id === 'screen-game') { score = 0; questionCount = 0; nextQuestion(); }
    }

    function changeName(dir) {
        currentIdx = (currentIdx + dir + shapes.length) % shapes.length;
        const s = shapes[currentIdx];
        document.getElementById('name-visual').className = "big-shape " + s.class;
        document.getElementById('name-title').innerText = s.name;
        speak("Ini adalah bangun " + s.name);
    }

    function changeCiri(dir) {
        currentIdx = (currentIdx + dir + shapes.length) % shapes.length;
        const s = shapes[currentIdx];
        document.getElementById('ciri-visual').className = "big-shape " + s.class;
        document.getElementById('ciri-title').innerText = s.name;
        document.getElementById('ciri-text').innerText = s.ciri;
        speak("Ciri-ciri " + s.name + " adalah: " + s.ciri);
    }

    function nextQuestion() {
        if(questionCount >= totalQuestions) {
            return nav('screen-cert', `Selamat ${studentName}! Kamu berhasil menyelesaikan semua misi!`);
        }
        
        questionCount++;
        document.getElementById('robot-icon').className = "float";
        document.getElementById('progress-text').innerText = `${questionCount}/${totalQuestions}`;
        document.getElementById('next-btn').classList.add('hidden');
        
        const qData = shapes[Math.floor(Math.random() * shapes.length)];
        document.getElementById('q-text').innerText = qData.ciri;
        
        const optBox = document.getElementById('q-opts');
        optBox.innerHTML = "";
        shapes.forEach(s => {
            const b = document.createElement('button');
            b.className = "small-btn";
            b.style.padding = "15px";
            b.innerText = s.name;
            b.onclick = () => {
                document.querySelectorAll('.small-btn').forEach(btn => btn.disabled = true);
                if(s.name === qData.name) {
                    score += 10;
                    document.getElementById('score-text').innerText = score;
                    document.getElementById('robot-icon').className = "dance";
                    speak(motivasi[Math.floor(Math.random()*motivasi.length)]);
                } else {
                    speak("Sayang sekali, tapi jangan menyerah ya!");
                }
                document.getElementById('next-btn').classList.remove('hidden');
            };
            optBox.appendChild(b);
        });
    }
</script>
</body>
</html>
